import React,{useState}from'react';import{uploadTranscript,uploadTranscriptPdf}from'../api';type Props={onLoaded:(t:any,extra?:any)=>void};export default function UploadTranscript({onLoaded}:Props){const[file,setFile]=useState<File|null>(null);const[loading,setLoading]=useState(false);async function handleUpload(){if(!file)return;setLoading(true);try{const isPdf=file.type==='application/pdf'||file.name.endsWith('.pdf');const res=isPdf?await uploadTranscriptPdf(file):await uploadTranscript(file);if(isPdf)onLoaded(res.transcript,{audit:res.audit,planned_terms:res.planned_terms});else onLoaded(res.transcript);}finally{setLoading(false);}}return(<div className='card'style={{textAlign:'center'}}><h3>Upload Transcript</h3><input type='file'accept='.pdf,.json'onChange={e=>setFile(e.target.files?.[0]||null)}/><button className='btn'onClick={handleUpload}disabled={!file||loading}>{loading?'Uploadingâ€¦':'Upload'}</button></div>);}
